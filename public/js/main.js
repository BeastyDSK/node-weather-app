const form=document.querySelector("form");function current(){const e=document.querySelector(".result-place"),t=document.querySelector(".result-type"),r=document.querySelector(".result-temprature"),o=document.querySelector(".result-rain"),n=document.querySelector(".result-img"),s=document.querySelector(".res");s.textContent="loading...",e.textContent="",t.textContent="",r.textContent="",o.textContent="",n.style.visibility="hidden",n.src="",document.querySelector(".moveright")&&(e.classList.remove("moveright"),r.classList.remove("moveright"),t.classList.remove("moveleft"),o.classList.remove("moveleft")),navigator.geolocation.getCurrentPosition(function(i){fetch(`/weather?lat=${i.coords.latitude}&lon=${i.coords.longitude}`).then(i=>{i.json().then(i=>{if(i.error)result.textContent=i.error;else{if(i.chance_for_rain<=10){var c=(2*Math.random()).toFixed(0);n.src=`/img/cloudy-day-${c}.svg`}else i.chance_for_rain>10&&i.chance_for_rain<=50?(c=(3*Math.random()).toFixed(0),n.src=`/img/rainy-${c}.svg`):(c=(3*Math.random()).toFixed(0),n.src=`/img/thunder-${c}.svg`);n.classList.add("weather-img"),n.style.visibility="visible",s.textContent="",e.textContent=i.address,t.textContent=i.forecast,r.textContent=i.temperature,o.textContent=`There is a ${i.chance_for_rain}% chance for rain.`,e.classList.add("moveright"),r.classList.add("moveright"),t.classList.add("moveleft"),o.classList.add("moveleft")}})})},function(e){1===e.code?s.textContent="Please allow location":s.textContent="Sorry no internet connection"})}form.addEventListener("submit",e=>{e.preventDefault();const t=document.querySelector("input").value,r=document.querySelector(".result-place"),o=document.querySelector(".result-type"),n=document.querySelector(".result-temprature"),s=document.querySelector(".result-rain"),i=document.querySelector(".result-img"),c=document.querySelector(".res");c.textContent="loading...",r.textContent="",o.textContent="",n.textContent="",s.textContent="",i.style.visibility="hidden",i.src="",document.querySelector(".moveright")&&(r.classList.remove("moveright"),n.classList.remove("moveright"),o.classList.remove("moveleft"),s.classList.remove("moveleft")),fetch("/weather?address="+t).then(e=>{e.json().then(e=>{if(e.error)c.textContent=e.error;else{if(e.chance_for_rain<=10){var t=(2*Math.random()).toFixed(0);i.src=`/img/cloudy-day-${t}.svg`}else if(e.chance_for_rain>10&&e.chance_for_rain<=50){t=(3*Math.random()).toFixed(0);i.src=`/img/rainy-${t}.svg`}else{t=(3*Math.random()).toFixed(0);i.src=`/img/thunder-${t}.svg`}i.classList.add("weather-img"),i.style.visibility="visible",c.textContent="",r.textContent=e.address,o.textContent=e.forecast,n.textContent=e.temperature,s.textContent=`There is a ${e.chance_for_rain}% chance for rain.`,r.classList.add("moveright"),n.classList.add("moveright"),o.classList.add("moveleft"),s.classList.add("moveleft")}})})});